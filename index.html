<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÅ‡∏•‡∏∞‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</title>

<link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
* {
    font-family: 'Sarabun', sans-serif;
    font-weight: bold;
    box-sizing: border-box;
}

body {
    margin: 0;
    background: #ffc0cb;
}

nav {
    background: #ff69b4;
    padding: 10px;
    text-align: center;
}

nav button {
    margin: 5px;
    padding: 10px 18px;
    border: none;
    background: #ffe4e1;
    color: red;
    font-size: 20px;
    border-radius: 10px;
    cursor: pointer;
}

section {
    display: none;
    padding: 20px;
}

section.active {
    display: block;
}

.card {
    background: white;
    padding: 20px;
    border-radius: 15px;
    margin-bottom: 20px;
}

.center {
    text-align: center;
}

.count {
    font-size: 28px;
    color: red;
}

.camera-box {
    position: relative;
}

video {
    width: 100%;
    border-radius: 10px;
    border: 3px solid pink;
}

/* üî¥ ‡∏Å‡∏£‡∏≠‡∏ö‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á */
.detect-box {
    position: absolute;
    border: 3px solid red;
    width: 160px;
    height: 120px;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}
</style>
</head>

<body>

<nav>
    <button onclick="showPage('home')">üè† ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
    <button onclick="showPage('detect')">üé• ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö</button>
    <button onclick="showPage('stats')">üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</button>
    <button onclick="showPage('data')">üìÅ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
</nav>

<section id="home" class="active">
    <div class="card center">
        <h1>‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÅ‡∏•‡∏∞‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</h1>
        <p>‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤ Computer Vision</p>
        <button onclick="showPage('detect')">üëâ ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</button>
    </div>
</section>

<section id="detect">
    <div class="card">
        <h2>üé• ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö</h2>

        <div class="camera-box">
            <video id="camera" autoplay></video>
            <div class="detect-box"></div>
        </div>

        <br>
        <button onclick="startCamera()">üì∑ ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á</button>
        <p>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå: <span id="sensorStatus">‚è≥ ‡∏£‡∏≠‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏</span></p>
    </div>

    <div class="card">
        <h3>üì¶ ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö</h3>
        <p>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö: <span id="bagCount" class="count">0</span></p>
        <p>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: <span id="bagType">-</span></p>
        <p>‡∏™‡∏µ: <span id="bagColor">-</span></p>
    </div>
</section>

<section id="stats">
    <div class="card">
        <h2>üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö</h2>
        <canvas id="chart"></canvas>
    </div>
</section>

<section id="data">
    <div class="card">
        <h2>üìÅ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö</h2>
        <table border="1" width="100%">
            <tr>
                <th>‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
                <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                <th>‡∏™‡∏µ</th>
                <th>‡πÄ‡∏ß‡∏•‡∏≤</th>
            </tr>
            <tbody id="dataTable"></tbody>
        </table>
    </div>
</section>

<script>
function showPage(id) {
    document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
}

/* ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á */
function startCamera() {
    navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => document.getElementById("camera").srcObject = stream)
        .catch(() => alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ"));
}

/* ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏£‡∏∞‡∏ö‡∏ö */
let count = 0;
let index = 1;
let detected = false;

const bagTypes = ["‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÄ‡∏õ‡πâ","‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏™‡∏∞‡∏û‡∏≤‡∏¢‡∏Ç‡πâ‡∏≤‡∏á","‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏ñ‡∏∑‡∏≠","‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÇ‡∏ô‡πâ‡∏ï‡∏ö‡∏∏‡πä‡∏Å"];
const bagColors = ["‡∏î‡∏≥","‡πÅ‡∏î‡∏á","‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô","‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß","‡∏ä‡∏°‡∏û‡∏π","‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á","‡∏Ç‡∏≤‡∏ß"];

/* üîé ‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á */
function sensorDetect() {
    // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏ú‡πà‡∏≤‡∏ô‡∏à‡∏∏‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á
    const objectInCenter = Math.random() > 0.7;

    if (objectInCenter && !detected) {
        detected = true;
        document.getElementById("sensorStatus").innerText = "‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á";
        detectBag();
    }

    if (!objectInCenter) {
        detected = false;
        document.getElementById("sensorStatus").innerText = "‚è≥ ‡∏£‡∏≠‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏";
    }
}

/* ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö + ‡∏ô‡∏±‡∏ö */
function detectBag() {
    const type = bagTypes[Math.floor(Math.random() * bagTypes.length)];
    const color = bagColors[Math.floor(Math.random() * bagColors.length)];

    count++;
    document.getElementById("bagCount").innerText = count;
    document.getElementById("bagType").innerText = type;
    document.getElementById("bagColor").innerText = color;

    const row = document.getElementById("dataTable").insertRow();
    row.innerHTML = `
        <td>${index++}</td>
        <td>${type}</td>
        <td>${color}</td>
        <td>${new Date().toLocaleTimeString()}</td>
    `;
}

/* ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ */
setInterval(sensorDetect, 2000);

/* ‡∏Å‡∏£‡∏≤‡∏ü */
new Chart(document.getElementById("chart"), {
    type: "bar",
    data: {
        labels: bagTypes,
        datasets: [{
            label: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö",
            data: [0,0,0,0],
            backgroundColor: "pink"
        }]
    }
});
</script>

</body>
</html>
